#!/usr/bin/env bash

NOTIFY_ID=9999

notify() {
    notify-send -u low -r "$NOTIFY_ID" -t 600 "$1" "$2"
}

# Volume controls
volume_up() {
    pamixer -i 5 --unmute
    notify "Volume" "$(pamixer --get-volume)%"
}

volume_down() {
    pamixer -d 5 --unmute
    notify "Volume" "$(pamixer --get-volume)%"
}

toggle_mute() {
    pamixer -t
    if pamixer --get-mute | grep -q true; then
        notify "Volume" "Muted"
    else
        notify "Volume" "$(pamixer --get-volume)%"
    fi
}

# Brightness controls
brightness_percent() {
    brightnessctl i | grep -o '(.*%)' | tr -d '()%'
}

brightness_up() {
    brightnessctl s +5% > /dev/null
    notify "Brightness" "$(brightness_percent)%"
}

brightness_down() {
    brightnessctl s 5%- > /dev/null
    notify "Brightness" "$(brightness_percent)%"
}

# Dispatcher
case "${1:-}" in
    volume-up)         volume_up ;;
    volume-down)       volume_down ;;
    toggle-mute)       toggle_mute ;;
    brightness-up)     brightness_up ;;
    brightness-down)   brightness_down ;;
    *)
        echo "Usage: $0 {volume-up|volume-down|toggle-mute|brightness-up|brightness-down}"
        exit 1
        ;;
esac
